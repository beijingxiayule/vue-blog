<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>for 循环的四种姿势 | blog</title>
    <meta name="description" content="Just playing around">
    <link rel="icon" href="/vue-blog/logo.png">
    
    <link rel="preload" href="/vue-blog/assets/css/0.styles.ea32b67c.css" as="style"><link rel="preload" href="/vue-blog/assets/js/app.90d19ee5.js" as="script"><link rel="preload" href="/vue-blog/assets/js/4.d6079133.js" as="script"><link rel="prefetch" href="/vue-blog/assets/js/10.226c6371.js"><link rel="prefetch" href="/vue-blog/assets/js/11.5e2e60fd.js"><link rel="prefetch" href="/vue-blog/assets/js/12.302cf6c4.js"><link rel="prefetch" href="/vue-blog/assets/js/13.15aff0ae.js"><link rel="prefetch" href="/vue-blog/assets/js/2.d3a3f049.js"><link rel="prefetch" href="/vue-blog/assets/js/3.327c83e2.js"><link rel="prefetch" href="/vue-blog/assets/js/5.126d9e8a.js"><link rel="prefetch" href="/vue-blog/assets/js/6.06834e62.js"><link rel="prefetch" href="/vue-blog/assets/js/7.7c2c6a95.js"><link rel="prefetch" href="/vue-blog/assets/js/8.e56a1002.js"><link rel="prefetch" href="/vue-blog/assets/js/9.09e3f7d8.js">
    <link rel="stylesheet" href="/vue-blog/assets/css/0.styles.ea32b67c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-blog/" class="home-link router-link-active"><!----> <span class="site-name">blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-blog/" class="nav-link">Home</a></div> <a href="https://github.com/beijingxiayule/ypwang.github.io.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    My GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-blog/" class="nav-link">Home</a></div> <a href="https://github.com/beijingxiayule/ypwang.github.io.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    My GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/vue-blog/blog/20191111.html" aria-current="page" class="active sidebar-link">玩转for循环</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vue-blog/blog/20191112.html" class="sidebar-link">Reflect与Proxy</a></li><li><a href="/vue-blog/blog/20191129.html" class="sidebar-link">vu常见面试题</a></li><li><a href="/vue-blog/blog/20200106.html" class="sidebar-link">层叠上下文与层叠顺序</a></li><li><a href="/vue-blog/blog/20200107.html" class="sidebar-link">setTimeout的第三个参数</a></li><li><a href="/vue-blog/blog/20200108.html" class="sidebar-link">认识 URLSearchParams</a></li></ul> </div> <div class="page"> <div class="content"><h3 id="for-循环的四种姿势"><a href="#for-循环的四种姿势" class="header-anchor">#</a> for 循环的四种姿势</h3> <h4 id="常用的js-的-4-种数组遍历方法：for-for-in-foreach-for-of；"><a href="#常用的js-的-4-种数组遍历方法：for-for-in-foreach-for-of；" class="header-anchor">#</a> 常用的JS 的 4 种数组遍历方法：for / for-in / forEach() / for-of；</h4> <h5 id="我们有多种方法来遍历-javascript-的数组或者对象，而它们之间的区别非常让人疑惑。airbnb-编码风格禁止使用-for-in-与-for-of来遍历数组，你知道为什么吗？"><a href="#我们有多种方法来遍历-javascript-的数组或者对象，而它们之间的区别非常让人疑惑。airbnb-编码风格禁止使用-for-in-与-for-of来遍历数组，你知道为什么吗？" class="header-anchor">#</a> 我们有多种方法来遍历 JavaScript 的数组或者对象，而它们之间的区别非常让人疑惑。Airbnb 编码风格禁止使用 for/in 与 for/of来遍历数组，你知道为什么吗？</h5> <h4 id="语法："><a href="#语法：" class="header-anchor">#</a> 语法：</h4> <pre><code>使用for和for/in，我们可以访问数组的下标，而不是实际的数组元素值：
      var arr = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];
for (let i = 0; i &lt; arr.length; ++i) {
    console.log(arr[i]);
}
​
for (let i in arr) {
    console.log(arr[i]);
}

使用for/of，则可以直接访问数组的元素值
for (const v of arr) {
    console.log(v);
}

使用forEach()，则可以同时访问数组的下标与元素值：
     arr.forEach((v, i) =&gt; console.log(v));
</code></pre> <h4 id="非数字属性："><a href="#非数字属性：" class="header-anchor">#</a> 非数字属性：</h4> <pre><code>JS的数组就是 Object，这就意味着我们可以给数组添加字符串属性：
var arr = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];
typeof arr; // 'object'
arr.test = &quot;bad&quot;; // 添加非数字属性
arr.test; // 'abc'
arr[1] === arr[&quot;1&quot;]; // true, JavaScript数组只是特殊的Object

4 种循环语法，只有for/in不会忽略非数字属性：
var arr = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];
arr.test = &quot;bad&quot;;
​
for (let i in arr) {
    console.log(arr[i]);  // 打印&quot;a, b, c, bad&quot;
}

for/in遍历数组的时候需要注意非数字属性，除非你真的要想要遍历非数字属性。可以使用 ESLint 的guard-for-in规则来禁止使用for/in;
</code></pre> <h4 id="数组的空元素："><a href="#数组的空元素：" class="header-anchor">#</a> 数组的空元素：</h4> <pre><code>JavaScript 数组可以有空元素，
var arr = [&quot;a&quot;, , &quot;c&quot;];
         arr.length; // 3
    对于['a', , 'c']，for/in与forEach会跳过空元素，而for与for/of则不会跳过。

arr.forEach(v =&gt; console.log(v));      // 打印&quot;a, c&quot;

for (let i in arr) {
    console.log(arr[i]);     // 打印&quot;a, c&quot;
     }

for (let i = 0; i &lt; arr.length; ++i) {
    console.log(arr[i]);    // 打印&quot;a, undefined, c&quot;
}
​
for (const v of arr) {
    console.log(v);     // 打印&quot;a, undefined, c&quot;
}

有一个神奇的现象，
var arr = [&quot;a&quot;, , &quot;c&quot;];
arr[1];    //  undefined
但是当你直接赋值undefined时候
 var arr = ['a', undefined, 'c'] ;
    4 种循环语法一致，打印的都是&quot;a, undefined, c&quot;。

  还有一个神奇的现象：
var arr = [&quot;a&quot;,undefined, &quot;c&quot;];
var b = JSON.parse(JSON.stringify(arr));
b;   // 打印 ['a', null, 'c']

var arr = [&quot;a&quot;,, &quot;c&quot;];
var b = [...arr];
b;  // 打印 ['a', undefined, 'c']

tips:for，for/in与for/of会保留外部作用域的this。对于forEach， 除非使用箭头函数，它的回调函数的 this 将会变化。还有一点是，尽量不要在forEach中使用 aysnc/await 以及 generators。
</code></pre> <h4 id="结论："><a href="#结论：" class="header-anchor">#</a> 结论：</h4> <pre><code>简单地说，for/of是遍历数组最可靠的方式，它比for循环简洁，并且没有for/in和forEach()那么多奇怪的特例。for/of的缺点是我们取索引值不方便。
使用for/of获取数组索引，可以这样写：
for (const [i, v] of arr.entries()) {
    console.log(i, v);
}
entries() 方法返回一个新的Array Iterator对象，该对象包含数组中每个索引的键/值对。
</code></pre></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/vue-blog/blog/20191112.html">
          Reflect与Proxy
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/vue-blog/assets/js/app.90d19ee5.js" defer></script><script src="/vue-blog/assets/js/4.d6079133.js" defer></script>
  </body>
</html>
